<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="client.css">
    <script src="https://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>
  </head>
 
  <body>

  <iframe id="spotifyPlayer" frameborder="0" allowtransparency="true" width="800px" src="https://embed.spotify.com/?uri=spotify:trackset:PREFEREDTITLE:2xmJNIkGmYBVoiu1WqA9il"></iframe>


  <table id="mainPlaylist" class="table table-striped col-md-12" >
    <thead>
      <tr>
        <th class="text-center">Track Name</th>
        <th class="text-center">Artist</th>
        <th class="text-center">Votes</th>  
      </tr>
    </thead>
    <tbody id="mainPlaylistRow">
    </tbody>
  </table>  

<script src='/socket.io/socket.io.js'></script> 
<script>
  var socket = io();

  socket.on('broadcast track', function(track_id, track_name, artist){
    var row = `<tr id="${track_id}">
               <td class="text-center">${track_name}</td>
               <td class="text-center">${artist}</<td>
               <td class="text-center"></td>
               </tr>`;

    $('#mainPlaylistRow').append(row)
  })

  socket.on('increase votes', function(track_id){
    id = $(`#${track_id}`).children().last().html();
    id = Number(id) + 1 
    $(`#${track_id}`).children().last().html(id)
  })

</script>
<script src="tablesort.min.js"></script>
<script src="tablesort.number.js"></script>
<script>
  new Tablesort(document.getElementById('mainPlaylist'), {
    descending: true
  });
</script>
</body>
</html>


